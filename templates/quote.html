<!-- HEADER -->
<div class="header">
    <div class="header-left">
        {{#if logo}}
        <img src="{{logo.dataUrl}}" alt="Logo" class="header-logo">
        {{else}}
        <svg width="80" height="60" viewBox="0 0 80 60" class="header-logo">
            <rect width="80" height="60" fill="#7B2CBF" rx="4"/>
            <text x="40" y="38" font-size="24" font-weight="bold" fill="white" text-anchor="middle" font-family="Arial">AT</text>
            <text x="40" y="52" font-size="8" fill="rgba(255,255,255,0.7)" text-anchor="middle" font-family="Arial">Travel</text>
        </svg>
        {{/if}}
        <div class="header-company">
            <h1>{{companyName}}</h1>
            <p>CUIT: {{companyCUIT}}</p>
            <p>{{companyAddress}}</p>
        </div>
    </div>
</div>

<!-- INFO BOXES - COMPACT -->
<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 15px; font-size: 9pt;">
    <div style="background: #f5f5f5; padding: 8px; border-radius: 4px; text-align: center;">
        <div style="font-weight: 700; color: #7B2CBF;">{{quoteNumber}}</div>
        <div style="font-size: 8pt; color: #999;">Nº Cotización</div>
    </div>
    <div style="background: #f5f5f5; padding: 8px; border-radius: 4px; text-align: center;">
        <div style="font-weight: 700; color: #7B2CBF;">{{quoteDate}}</div>
        <div style="font-size: 8pt; color: #999;">Fecha</div>
    </div>
    <div style="background: #f5f5f5; padding: 8px; border-radius: 4px; text-align: center;">
        <div style="font-weight: 700; color: #7B2CBF;">{{validity}} días</div>
        <div style="font-size: 8pt; color: #999;">Vigencia</div>
    </div>
</div>

<!-- EMISOR & CLIENTE -->
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; page-break-inside: avoid;">
    <div class="section">
        <div class="section-title">Datos del Emisor</div>
        <div class="section-content">
            <div class="info-field">
                <div class="info-label">Razón Social</div>
                <div class="info-value">{{companyName}}</div>
            </div>
            <div class="info-field" style="margin-top: 8px;">
                <div class="info-label">CUIT</div>
                <div class="info-value">{{companyCUIT}}</div>
            </div>
            <div class="info-field" style="margin-top: 8px;">
                <div class="info-label">Domicilio</div>
                <div class="info-value">{{companyAddress}}</div>
            </div>
            <div class="info-field" style="margin-top: 8px;">
                <div class="info-label">Email</div>
                <div class="info-value">{{companyEmail}}</div>
            </div>
            <div class="info-field" style="margin-top: 8px;">
                <div class="info-label">Teléfono</div>
                <div class="info-value">{{companyPhone}}</div>
            </div>
        </div>
    </div>

    <div class="section">
        <div class="section-title">Datos del Cliente</div>
        <div class="section-content">
            <div class="info-field">
                <div class="info-label">Nombre/Empresa</div>
                <div class="info-value">{{clientName}}</div>
            </div>
            {{#if clientCUIT}}
            <div class="info-field" style="margin-top: 8px;">
                <div class="info-label">CUIT/DNI</div>
                <div class="info-value">{{clientCUIT}}</div>
            </div>
            {{/if}}
            {{#if clientEmail}}
            <div class="info-field" style="margin-top: 8px;">
                <div class="info-label">Email</div>
                <div class="info-value">{{clientEmail}}</div>
            </div>
            {{/if}}
            {{#if clientPhone}}
            <div class="info-field" style="margin-top: 8px;">
                <div class="info-label">Teléfono</div>
                <div class="info-value">{{clientPhone}}</div>
            </div>
            {{/if}}
        </div>
    </div>
</div>

<!-- ITEMS TABLE -->
<div class="section">
    <div class="section-title">Servicios / Productos</div>
    <table class="items-table">
        <thead>
            <tr>
                <th style="width: 50%;">Descripción</th>
                <th class="text-center" style="width: 15%;">Cantidad</th>
                <th class="text-right" style="width: 17.5%;">Precio Unitario</th>
                <th class="text-right" style="width: 17.5%;">Subtotal</th>
            </tr>
        </thead>
        <tbody>
            {{#each items}}
            <tr>
                <td>{{this.description}}</td>
                <td class="text-center">{{this.quantity}}</td>
                <td class="text-right currency">{{formatCurrency this.price}}</td>
                <td class="text-right currency">{{formatCurrency (multiply this.quantity this.price)}}</td>
            </tr>
            {{/each}}
        </tbody>
    </table>
</div>

<!-- TOTALS -->
<div class="totals-section">
    <div class="totals-box">
        <div class="totals-row">
            <span>Subtotal:</span>
            <span class="currency">{{formatCurrency subtotal}}</span>
        </div>
        <div class="totals-row total">
            <span>TOTAL COTIZADO:</span>
            <span class="currency">{{formatCurrency total}}</span>
        </div>
    </div>
</div>

<!-- IMÁGENES -->
{{#if images}}
<div class="section" style="page-break-inside: avoid; margin-bottom: 20px;">
    <div class="section-title">Información Adicional</div>
    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px;">
        {{#if images.flight}}
        <div style="border: 1px solid #ddd; padding: 10px; border-radius: 4px;">
            <div style="font-weight: 600; font-size: 10pt; margin-bottom: 8px; color: #7B2CBF;">Datos del Vuelo</div>
            <img src="{{images.flight}}" alt="Vuelo" style="max-width: 100%; max-height: 150px; margin-bottom: 8px; border-radius: 3px;">
            {{#if flightDescription}}<p style="font-size: 9pt; color: #666; margin: 0;">{{flightDescription}}</p>{{/if}}
        </div>
        {{/if}}
        {{#if images.hotel}}
        <div style="border: 1px solid #ddd; padding: 10px; border-radius: 4px;">
            <div style="font-weight: 600; font-size: 10pt; margin-bottom: 8px; color: #7B2CBF;">Datos del Hospedaje</div>
            <img src="{{images.hotel}}" alt="Hotel" style="max-width: 100%; max-height: 150px; margin-bottom: 8px; border-radius: 3px;">
            {{#if hotelDescription}}<p style="font-size: 9pt; color: #666; margin: 0;">{{hotelDescription}}</p>{{/if}}
        </div>
        {{/if}}
        {{#if images.transfer}}
        <div style="border: 1px solid #ddd; padding: 10px; border-radius: 4px;">
            <div style="font-weight: 600; font-size: 10pt; margin-bottom: 8px; color: #7B2CBF;">Info de Traslados</div>
            <img src="{{images.transfer}}" alt="Transfer" style="max-width: 100%; max-height: 150px; margin-bottom: 8px; border-radius: 3px;">
            {{#if transferDescription}}<p style="font-size: 9pt; color: #666; margin: 0;">{{transferDescription}}</p>{{/if}}
        </div>
        {{/if}}
    </div>
</div>
{{/if}}

<!-- CONDICIONES -->
<div class="section">
    <div class="section-title">Condiciones de la Oferta</div>
    <div class="conditions">
        <p><strong>✓ Vigencia:</strong> {{validity}} días a partir de la fecha</p>
        <p><strong>✓ Plazo de Entrega:</strong> {{deliveryTerm}}</p>
        <p><strong>✓ Forma de Pago:</strong></p>
        <p style="margin-left: 15px;">{{paymentTerms}}</p>
    </div>
</div>

<!-- FOOTER -->
<div class="footer">
    <p>Cotización válida por {{validity}} días a partir de la emisión.</p>
    <p>Para aceptar esta oferta, por favor confirmar vía email o teléfono.</p>
</div>
