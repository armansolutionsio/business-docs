<!-- HEADER SIN LÍNEAS -->
<div style="display: flex; align-items: flex-start; gap: 15px; padding-bottom: 15px; margin-bottom: 25px; page-break-inside: avoid;">
    <div style="flex-shrink: 0;">
        {{#if logo}}
        <img src="{{logo.dataUrl}}" alt="Logo" style="max-width: 80px; max-height: 60px; object-fit: contain;">
        {{else}}
        <svg width="80" height="60" viewBox="0 0 80 60">
            <rect width="80" height="60" fill="#7B2CBF" rx="4"/>
            <text x="40" y="38" font-size="24" font-weight="bold" fill="white" text-anchor="middle" font-family="Arial">AT</text>
            <text x="40" y="52" font-size="8" fill="rgba(255,255,255,0.7)" text-anchor="middle" font-family="Arial">Travel</text>
        </svg>
        {{/if}}
    </div>
    <div style="flex: 1;">
        <h1 style="font-size: 18pt; font-weight: 700; color: #7B2CBF; margin: 0 0 3px 0;">{{companyName}}</h1>
        <p style="font-size: 9pt; color: #666; margin: 2px 0;">CUIT: {{companyCUIT}}</p>
        <p style="font-size: 9pt; color: #666; margin: 2px 0;">{{companyAddress}}</p>
    </div>
    <div style="text-align: right; padding: 12px 15px; background: linear-gradient(135deg, #7B2CBF 0%, #6A1B9A 100%); border-radius: 8px; color: white; min-width: 200px;">
        <div style="font-size: 14pt; font-weight: 700; margin-bottom: 8px;">COTIZACIÓN</div>
        <div style="font-size: 20pt; font-weight: 700;">N° {{quoteNumber}}</div>
    </div>
</div>

<!-- EMISOR & CLIENTE -->
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; page-break-inside: avoid;">
    <div style="background: #f5f5f5; padding: 12px; border-radius: 4px;">
        <div style="font-size: 11pt; font-weight: 700; color: white; background: #7B2CBF; padding: 8px; margin: -12px -12px 10px -12px; border-radius: 4px 4px 0 0; text-transform: uppercase;">Datos del Emisor</div>
        <div style="display: flex; flex-direction: column; gap: 8px;">
            <div style="display: flex; flex-direction: column;">
                <div style="font-size: 8pt; font-weight: 600; text-transform: uppercase; color: #666;">Razón Social</div>
                <div style="font-size: 10pt; color: #2c3e50; font-weight: 500;">{{companyName}}</div>
            </div>
            <div style="display: flex; flex-direction: column;">
                <div style="font-size: 8pt; font-weight: 600; text-transform: uppercase; color: #666;">CUIT</div>
                <div style="font-size: 10pt; color: #2c3e50; font-weight: 500;">{{companyCUIT}}</div>
            </div>
            <div style="display: flex; flex-direction: column;">
                <div style="font-size: 8pt; font-weight: 600; text-transform: uppercase; color: #666;">Domicilio</div>
                <div style="font-size: 10pt; color: #2c3e50; font-weight: 500;">{{companyAddress}}</div>
            </div>
            <div style="display: flex; flex-direction: column;">
                <div style="font-size: 8pt; font-weight: 600; text-transform: uppercase; color: #666;">Email</div>
                <div style="font-size: 10pt; color: #2c3e50; font-weight: 500;">{{companyEmail}}</div>
            </div>
            <div style="display: flex; flex-direction: column;">
                <div style="font-size: 8pt; font-weight: 600; text-transform: uppercase; color: #666;">Teléfono</div>
                <div style="font-size: 10pt; color: #2c3e50; font-weight: 500;">{{companyPhone}}</div>
            </div>
        </div>
    </div>

    <div style="background: #f5f5f5; padding: 12px; border-radius: 4px;">
        <div style="font-size: 11pt; font-weight: 700; color: white; background: #7B2CBF; padding: 8px; margin: -12px -12px 10px -12px; border-radius: 4px 4px 0 0; text-transform: uppercase;">Datos del Cliente</div>
        <div style="display: flex; flex-direction: column; gap: 8px;">
            <div style="display: flex; flex-direction: column;">
                <div style="font-size: 8pt; font-weight: 600; text-transform: uppercase; color: #666;">Nombre/Empresa</div>
                <div style="font-size: 10pt; color: #2c3e50; font-weight: 500;">{{clientName}}</div>
            </div>
            {{#if clientCUIT}}
            <div style="display: flex; flex-direction: column;">
                <div style="font-size: 8pt; font-weight: 600; text-transform: uppercase; color: #666;">CUIT/DNI</div>
                <div style="font-size: 10pt; color: #2c3e50; font-weight: 500;">{{clientCUIT}}</div>
            </div>
            {{/if}}
            {{#if clientEmail}}
            <div style="display: flex; flex-direction: column;">
                <div style="font-size: 8pt; font-weight: 600; text-transform: uppercase; color: #666;">Email</div>
                <div style="font-size: 10pt; color: #2c3e50; font-weight: 500;">{{clientEmail}}</div>
            </div>
            {{/if}}
            {{#if clientPhone}}
            <div style="display: flex; flex-direction: column;">
                <div style="font-size: 8pt; font-weight: 600; text-transform: uppercase; color: #666;">Teléfono</div>
                <div style="font-size: 10pt; color: #2c3e50; font-weight: 500;">{{clientPhone}}</div>
            </div>
            {{/if}}
        </div>
    </div>
</div>

<!-- ITEMS TABLE -->
<div style="background: #f5f5f5; padding: 12px; border-radius: 4px; margin-bottom: 20px; page-break-inside: avoid;">
    <div style="font-size: 11pt; font-weight: 700; color: white; background: #7B2CBF; padding: 8px; margin: -12px -12px 10px -12px; border-radius: 4px 4px 0 0; text-transform: uppercase;">Servicios / Productos</div>
    <table style="width: 100%; border-collapse: collapse; margin-top: 10px;">
        <thead style="background: #7B2CBF; color: white;">
            <tr>
                <th style="width: 50%; padding: 10px 8px; text-align: left; font-size: 9pt; font-weight: 700; border: 1px solid #ddd;">Descripción</th>
                <th style="width: 15%; padding: 10px 8px; text-align: center; font-size: 9pt; font-weight: 700; border: 1px solid #ddd;">Cantidad</th>
                <th style="width: 17.5%; padding: 10px 8px; text-align: right; font-size: 9pt; font-weight: 700; border: 1px solid #ddd;">Precio Unitario</th>
                <th style="width: 17.5%; padding: 10px 8px; text-align: right; font-size: 9pt; font-weight: 700; border: 1px solid #ddd;">Subtotal</th>
            </tr>
        </thead>
        <tbody>
            {{#each items}}
            <tr style="background: white;">
                <td style="padding: 10px 8px; border: 1px solid #ddd; font-size: 10pt;">{{this.description}}</td>
                <td style="padding: 10px 8px; border: 1px solid #ddd; font-size: 10pt; text-align: center;">{{this.quantity}}</td>
                <td style="padding: 10px 8px; border: 1px solid #ddd; font-size: 10pt; text-align: right; font-family: 'Courier New', monospace;">{{formatCurrency this.price}}</td>
                <td style="padding: 10px 8px; border: 1px solid #ddd; font-size: 10pt; text-align: right; font-family: 'Courier New', monospace;">{{formatCurrency (multiply this.quantity this.price)}}</td>
            </tr>
            {{/each}}
        </tbody>
    </table>
</div>

<!-- TOTALS -->
<div style="display: flex; justify-content: flex-end; margin: 20px 0; page-break-inside: avoid;">
    <div style="width: 350px; border: 2px solid #7B2CBF; border-radius: 4px; overflow: hidden;">
        <div style="display: flex; justify-content: space-between; padding: 10px 15px; border-bottom: 1px solid #ddd; font-size: 10pt; background: white;">
            <span style="font-weight: 600;">Subtotal:</span>
            <span style="font-family: 'Courier New', monospace; text-align: right; font-weight: 600;">{{formatCurrency subtotal}}</span>
        </div>
        <div style="display: flex; justify-content: space-between; padding: 12px 15px; background: #7B2CBF; color: white; font-weight: 700; font-size: 12pt;">
            <span>TOTAL COTIZADO:</span>
            <span style="font-family: 'Courier New', monospace; text-align: right;">{{formatCurrency total}}</span>
        </div>
    </div>
</div>

<!-- IMÁGENES / INFORMACIÓN ADICIONAL -->
{{#if images}}
<div style="background: #f5f5f5; padding: 18px; border-radius: 6px; margin-bottom: 20px; page-break-inside: avoid;">
    <div style="font-size: 12pt; font-weight: 700; color: #7B2CBF; margin-bottom: 15px; padding-bottom: 10px; border-bottom: 2px solid #7B2CBF;">
        Información Adicional del Viaje
    </div>
    <div style="display: grid; gap: 15px;">
        {{#if images.flight}}
        <div style="background: white; padding: 15px; border-radius: 6px; border-left: 3px solid #7B2CBF;">
            <div style="font-weight: 700; color: #7B2CBF; margin-bottom: 10px; font-size: 10pt;">Datos del Vuelo</div>
            <img src="{{images.flight}}" style="width: 100%; max-width: {{imageWidth flightSize}}; height: auto; border: 1px solid #ddd; margin-bottom: 8px; border-radius: 4px; display: block;" alt="Detalle de vuelo" />
            {{#if flightDescription}}<p style="font-size: 9pt; color: #555; margin: 8px 0 0 0; line-height: 1.5; white-space: pre-wrap;">{{flightDescription}}</p>{{/if}}
        </div>
        {{/if}}
        {{#if images.hotel}}
        <div style="background: white; padding: 15px; border-radius: 6px; border-left: 3px solid #7B2CBF;">
            <div style="font-weight: 700; color: #7B2CBF; margin-bottom: 10px; font-size: 10pt;">Datos del Hospedaje</div>
            <img src="{{images.hotel}}" style="width: 100%; max-width: {{imageWidth hotelSize}}; height: auto; border: 1px solid #ddd; margin-bottom: 8px; border-radius: 4px; display: block;" alt="Detalle de hospedaje" />
            {{#if hotelDescription}}<p style="font-size: 9pt; color: #555; margin: 8px 0 0 0; line-height: 1.5; white-space: pre-wrap;">{{hotelDescription}}</p>{{/if}}
        </div>
        {{/if}}
        {{#if images.transfer}}
        <div style="background: white; padding: 15px; border-radius: 6px; border-left: 3px solid #7B2CBF;">
            <div style="font-weight: 700; color: #7B2CBF; margin-bottom: 10px; font-size: 10pt;">Información de Traslados</div>
            <img src="{{images.transfer}}" style="width: 100%; max-width: {{imageWidth transferSize}}; height: auto; border: 1px solid #ddd; margin-bottom: 8px; border-radius: 4px; display: block;" alt="Detalle de traslados" />
            {{#if transferDescription}}<p style="font-size: 9pt; color: #555; margin: 8px 0 0 0; line-height: 1.5; white-space: pre-wrap;">{{transferDescription}}</p>{{/if}}
        </div>
        {{/if}}
    </div>
</div>
{{/if}}

<!-- CONDICIONES -->
<div style="background: #f5f5f5; padding: 12px; border-radius: 4px; margin-bottom: 20px; page-break-inside: avoid;">
    <div style="font-size: 11pt; font-weight: 700; color: white; background: #7B2CBF; padding: 8px; margin: -12px -12px 10px -12px; border-radius: 4px 4px 0 0; text-transform: uppercase;">Condiciones de la Oferta</div>
    <div style="padding: 8px 0;">
        <p style="font-size: 9pt; margin-bottom: 6px; line-height: 1.5;"><strong style="color: #7B2CBF;">Vigencia:</strong> {{validity}} días a partir de la fecha</p>
        <p style="font-size: 9pt; margin-bottom: 6px; line-height: 1.5;"><strong style="color: #7B2CBF;">Plazo de Entrega:</strong> {{deliveryTerm}}</p>
        <p style="font-size: 9pt; margin-bottom: 6px; line-height: 1.5;"><strong style="color: #7B2CBF;">Forma de Pago:</strong></p>
        <p style="font-size: 9pt; margin-left: 15px; margin-bottom: 6px; line-height: 1.5;">{{paymentTerms}}</p>
    </div>
</div>

<!-- FOOTER -->
<div style="margin-top: 30px; padding-top: 15px; border-top: 2px solid #ddd; text-align: center; font-size: 8pt; color: #999; page-break-inside: avoid;">
    <p style="margin: 3px 0;">Cotización válida por {{validity}} días a partir de la emisión.</p>
    <p style="margin: 3px 0;">Para aceptar esta oferta, por favor confirmar vía email o teléfono.</p>
</div>
