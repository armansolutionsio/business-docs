<!-- HEADER -->
<div class="header">
    <div class="header-left">
        {{#if logo}}
        <img src="{{logo.dataUrl}}" alt="Logo" class="header-logo">
        {{else}}
        <svg width="80" height="60" viewBox="0 0 80 60" class="header-logo">
            <rect width="80" height="60" fill="#7B2CBF" rx="4"/>
            <text x="40" y="38" font-size="24" font-weight="bold" fill="white" text-anchor="middle" font-family="Arial">AT</text>
            <text x="40" y="52" font-size="8" fill="rgba(255,255,255,0.7)" text-anchor="middle" font-family="Arial">Travel</text>
        </svg>
        {{/if}}
        <div class="header-company">
            <h1>{{companyName}}</h1>
            <p>CUIT: {{companyCUIT}}</p>
            <p>{{companyAddress}}</p>
        </div>
    </div>

</div>

<!-- INFO BOXES - COMPACT -->
<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin-bottom: 15px; font-size: 9pt;">
    <div style="background: #f5f5f5; padding: 8px; border-radius: 4px; text-align: center;">
        <div style="font-weight: 700; color: #7B2CBF;">{{invoiceLetter}} {{invoiceNumber}}</div>
        <div style="font-size: 8pt; color: #999;">Nº Factura</div>
    </div>
    <div style="background: #f5f5f5; padding: 8px; border-radius: 4px; text-align: center;">
        <div style="font-weight: 700; color: #7B2CBF;">{{invoiceDate}}</div>
        <div style="font-size: 8pt; color: #999;">Fecha</div>
    </div>
    <div style="background: #f5f5f5; padding: 8px; border-radius: 4px; text-align: center;">
        <div style="font-weight: 700; color: #7B2CBF;">{{cae}}</div>
        <div style="font-size: 8pt; color: #999;">CAE</div>
    </div>
</div>

<!-- EMISOR & CLIENTE -->
<div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; page-break-inside: avoid;">
    <div class="section">
        <div class="section-title">Datos del Emisor</div>
        <div class="section-content">
            <div class="info-field">
                <div class="info-label">Razón Social</div>
                <div class="info-value">{{companyName}}</div>
            </div>
            <div class="info-field" style="margin-top: 8px;">
                <div class="info-label">CUIT</div>
                <div class="info-value">{{companyCUIT}}</div>
            </div>
            <div class="info-field" style="margin-top: 8px;">
                <div class="info-label">Condición IVA</div>
                <div class="info-value">{{companyIVACondition}}</div>
            </div>
            <div class="info-field" style="margin-top: 8px;">
                <div class="info-label">Domicilio</div>
                <div class="info-value">{{companyAddress}}</div>
            </div>
        </div>
    </div>

    <div class="section">
        <div class="section-title">Datos del Cliente</div>
        <div class="section-content">
            <div class="info-field">
                <div class="info-label">Razón Social</div>
                <div class="info-value">{{clientName}}</div>
            </div>
            <div class="info-field" style="margin-top: 8px;">
                <div class="info-label">CUIT/DNI</div>
                <div class="info-value">{{clientCUIT}}</div>
            </div>
            <div class="info-field" style="margin-top: 8px;">
                <div class="info-label">Condición IVA</div>
                <div class="info-value">{{clientIVACondition}}</div>
            </div>
            <div class="info-field" style="margin-top: 8px;">
                <div class="info-label">Domicilio</div>
                <div class="info-value">{{clientAddress}}</div>
            </div>
        </div>
    </div>
</div>

<!-- ITEMS TABLE -->
<div class="section">
    <div class="section-title">Detalle de Comprobante</div>
    <table class="items-table">
        <thead>
            <tr>
                <th style="width: 50%;">Descripción</th>
                <th class="text-center" style="width: 15%;">Cantidad</th>
                <th class="text-right" style="width: 17.5%;">Precio Unitario</th>
                <th class="text-right" style="width: 17.5%;">Subtotal</th>
            </tr>
        </thead>
        <tbody>
            {{#each items}}
            <tr>
                <td>{{this.description}}</td>
                <td class="text-center">{{this.quantity}}</td>
                <td class="text-right currency">{{formatCurrency this.price}}</td>
                <td class="text-right currency">{{formatCurrency (multiply this.quantity this.price)}}</td>
            </tr>
            {{/each}}
        </tbody>
    </table>
</div>

<!-- TOTALS -->
<div class="totals-section">
    <div class="totals-box">
        <div class="totals-row">
            <span>Subtotal:</span>
            <span class="currency">{{formatCurrency subtotal}}</span>
        </div>
        <div class="totals-row total">
            <span>TOTAL:</span>
            <span class="currency">{{formatCurrency total}}</span>
        </div>
    </div>
</div>

<!-- FOOTER -->
<div class="footer">
    <p>Vencimiento CAE: {{caeExpiration}}</p>
    {{#if qr}}
    <div style="margin-top: 15px; text-align: center;">
        <img src="{{qr.dataUrl}}" alt="QR AFIP" class="qr-image">
        <p style="margin-top: 5px; font-size: 9pt;">Código QR AFIP</p>
    </div>
    {{/if}}
    <p style="margin-top: 10px;">Este documento es comprobante válido de venta.</p>
</div>
